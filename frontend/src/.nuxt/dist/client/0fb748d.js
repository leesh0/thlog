(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1298:function(t,e,n){t.exports=n.p+"img/logo.68bf749.svg"},1391:function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center mt-20 mb-10"},[r("div",{staticClass:"inline-flex items-center gap-x-1 text-black hover:text-black",attrs:{id:"brand"}},[r("img",{staticClass:"w-8 h-8",attrs:{src:n(1298)}}),t._v("\n      thlog\n    ")])])}],c=(n(156),{middleware:"auth",layout:"empty",data:function(){return{userId:this.$auth.user.username,step:0,nickname:this.$auth.user.nickname,userAvatar:this.$auth.user.avatar,introduce:this.$auth.user.introduce,loading:!1}},methods:{changeAvatar:function(){var t=this,e=new FormData,n=this.$refs.avatar.files[0];e.append("avatar",n);this.$message.loading("프로필 사진을 업로드중...",0);this.$axios.patch("/auth/user/",e).then((function(e){t.userAvatar=e.data.avatar,t.$message.destroy(),t.$message.success("프로필 사진이 변경되었습니다.")})).catch((function(e){t.$message.destroy(),t.$message.error("프로필 사진 변경에 실패하였습니다.")}))},cancel:function(){var t=this;this.$axios.post("/auth/delete/").then((function(e){t.$auth.logout()})).catch((function(e){t.$message.error("가입취소에 실패하였습니다. 다시 시도해주세요.")}))},complete:function(){var t=this;this.loading=!0;var e={nickname:this.nickname,introduce:this.introduce};this.userId!=this.$auth.user.username&&(e.username=this.userId),this.$axios.patch("/auth/user/",e).then((function(e){t.loading=!1,t.$message.success("가입을 완료하였습니다."),t.$auth.setUser(e.data),t.$router.push("/")})).catch((function(e){t.loading=!1;var n=e.response.data;n.username?t.$message.error("이미 존재하거나 유효하지 않은 유저명입니다."):n.nickname?t.$message.error("유효하지 않은 닉네임입니다."):n.introduce?t.$message.error(n.introduce):t.$message.error("네트워크오류로 가입에 실패하였습니다. 다시 시도해주세요.")}))},step2:function(){[null,""].includes(this.nickname)||[null,""].includes(this.userId)?this.$message.error("닉네임 혹은 아이디가 입력되지 않았습니다."):this.step=1}}}),o=n(68),component=Object(o.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full max-w-md mx-auto mt-10 px-3"},[t._m(0),t._v(" "),n("h1",{staticClass:"text-center text-base"},[t._v("\n    현재 가입을 진행중입니다. 닉네임과 아이디를 설정해서 가입을 완료해 주세요.\n  ")]),t._v(" "),n("div",{staticClass:"py-5"},[n("a-steps",{attrs:{current:t.step,size:"small"}},[n("a-step",{attrs:{title:"아이디설정"}}),t._v(" "),n("a-step",{attrs:{title:"프로필설정"}})],1)],1),t._v(" "),0==t.step?n("div",[n("div",{staticClass:"bg-gray-50 rounded-md p-5 mt-5"},[n("div",[n("label",{staticClass:"font-medium text-base"},[t._v("닉네임")]),t._v(" "),n("a-input",{attrs:{placeholder:"닉네임"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),t._v(" "),n("div",{staticClass:"mt-5"},[n("label",{staticClass:"font-medium text-base"},[t._v("유저명")]),t._v(" "),n("a-input",{attrs:{placeholder:"유저명","addon-before":"https://thlog.me/"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)]),t._v(" "),n("div",{staticClass:"py-5 flex justify-end gap-x-5"},[n("a-button",{attrs:{type:"dashed"},on:{click:t.cancel}},[t._v("가입취소")]),t._v(" "),n("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.step2}},[t._v("다음단계로")])],1)]):t._e(),t._v(" "),1==t.step?n("div",[n("div",{staticClass:"bg-gray-50 rounded-md p-5 mt-5"},[n("div",{staticClass:"flex justify-center items-center"},[n("input",{ref:"avatar",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.changeAvatar}}),t._v(" "),n("img",{staticClass:"rounded-full w-30 h-30 border cursor-pointer bg-white shadow-sm",attrs:{src:t.userAvatar},on:{click:function(e){return t.$refs.avatar.click()}}})]),t._v(" "),n("div",{staticClass:"text-center mt-3"},[n("a-button",{on:{click:function(e){return t.$refs.avatar.click()}}},[t._v("이미지 변경")])],1),t._v(" "),n("div",{staticClass:"mt-5"},[n("label",{staticClass:"font-medium text-base"},[t._v("한줄소개")]),t._v(" "),n("a-textarea",{attrs:{placeholder:"",rows:4},model:{value:t.introduce,callback:function(e){t.introduce=e},expression:"introduce"}})],1)]),t._v(" "),n("div",{staticClass:"py-5 flex justify-end gap-x-5"},[n("a-button",{attrs:{type:"dashed"},on:{click:function(e){t.step-=1}}},[t._v("이전으로")]),t._v(" "),n("a-button",{attrs:{type:"primary",ghost:"",loading:t.loading},on:{click:t.complete}},[t._v("Thlog 시작하기")])],1)]):t._e()])}),r,!1,null,null,null);e.default=component.exports}}]);