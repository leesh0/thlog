(window.webpackJsonp=window.webpackJsonp||[]).push([[25,4],{1302:function(t,e,r){"use strict";r.r(e);var o={props:["src"]},n=r(68),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rounded-full cursor-pointer select-none"},[r("img",{staticClass:"w-10 h-10 rounded-full border border-gray-200",attrs:{src:t.src}})])}),[],!1,null,null,null);e.default=component.exports},1315:function(t,e,r){var content=r(1356);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(96).default)("5312c068",content,!0,{sourceMap:!1})},1355:function(t,e,r){"use strict";r(1315)},1356:function(t,e,r){var o=r(95)(!1);o.push([t.i,".toolbar[data-v-610c33e3]{display:flex;align-items:center;padding-top:.5rem;padding-bottom:.5rem;--tw-text-opacity:1;color:rgba(156,163,175,var(--tw-text-opacity));-webkit-column-gap:.5rem;-moz-column-gap:.5rem;grid-column-gap:.5rem;column-gap:.5rem}.toolbar>div[data-v-610c33e3]:hover{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(6,182,212,var(--tw-text-opacity))}.toolbar>div[data-v-610c33e3]{border-radius:.375rem;cursor:pointer;display:flex;align-items:center;padding:.25rem .5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-ta[data-v-610c33e3]{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity));border-radius:.375rem;border-style:none;border-width:0!important;font-size:1rem;line-height:1.5rem;padding:.75rem;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)!important;--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color)!important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),0 0 transparent!important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)!important;resize:none}.markdown-ta[data-v-610c33e3]:hover{border-color:transparent!important;border-width:0!important}.markdown-ta[data-v-610c33e3]:focus{border-width:0;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),0 0 transparent;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}",""]),t.exports=o},1412:function(t,e,r){"use strict";r.r(e);r(119);var o={created:function(){var t=this;this.$nuxt.$on("toComment",(function(e){t.toComment=e}))},destroyed:function(){this.$nuxt.$off("toComment")},props:["thread"],data:function(){return{areaActive:!1,mdArea:"",commentTab:1,writeLoading:!1,toComment:!1}},methods:{reply:function(){var t=this;this.$route.params.user,this.$route.params.read;this.writeLoading=!0,this.$axios.post("api/reply/create/".concat(this.toComment),{text:this.mdArea}).then((function(e){console.log(e.data),t.writeLoading=!1,t.toComment=!1,t.mdArea="",t.$nuxt.$emit("replyUp-".concat(e.data.comment),e.data)})).catch((function(e){t.$message.error("네트워크 오류로 답글작성에 실패하였습니다."),t.writeLoading=!1}))},write:function(){var t=this,e=this.$route.params.user,r=this.$route.params.read;this.writeLoading=!0,this.$axios.post("api/thread/".concat(e,"/").concat(r,"/comments"),{text:this.mdArea}).then((function(e){console.log(e.data),t.writeLoading=!1,t.mdArea="",t.$emit("addComment",e.data)})).catch((function(e){t.$message.error("코멘트 작성에 실패하였습니다. 다시 시도해주세요."),t.writeLoading=!1}))},close:function(){var t=this,e=this.$route.params.user,r=this.$route.params.read;this.$axios.patch("api/thread/".concat(e,"/").concat(r),{closed:!this.thread.closed}).then((function(e){t.thread.closed=e.data.closed,t.$emit("close",e.data.closed)})).catch((function(t){}))},uploadImage:function(){var t=this,e=new FormData,r=this.$refs.commentImage.files[0];e.append("image",r);this.$message.loading("사진을 업로드중...",0);this.$axios.post("/api/upload/image/",e).then((function(e){console.log(e.data),t.$message.destroy(),t.$message.success("업로드 완료."),t.insertImage(e.data.image),t.$refs.commentImage.value=null})).catch((function(e){var r;t.$message.destroy(),null!==(r=e.response)&&void 0!==r&&r.data.image?t.$message.error(e.response.data.image):t.$message.error("알 수 없는 오류로 인하여 업로드에 실패하였습니다."),t.$refs.commentImage.value=null}))},insertImage:function(img){var t=this.$refs.ta.$el.selectionStart,e=this.mdArea,r="![](".concat(img,")"),o=e.substring(0,t)+r+e.substring(t,e.length);this.mdArea=o}}},n=(r(1355),r(68)),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-5",class:t.toComment?"sticky bottom-0 bg-white border":""},[r("input",{ref:"commentImage",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.uploadImage}}),t._v(" "),t.toComment?r("div",{staticClass:"flex items-center justify-between"},[r("div",{staticClass:"flex items-center gap-x-2"},[r("div",{staticClass:"py-1 px-3 rounded-full bg-gray-100 border max-w-max"},[t._v("\n        "+t._s(t.toComment)+"\n      ")]),t._v("\n      에 답글을 작성\n    ")]),t._v(" "),r("div",{staticClass:"flex items-center cursor-pointer select-none",on:{click:function(e){t.toComment=!1}}},[r("a-icon",{attrs:{type:"close"}})],1)]):t._e(),t._v(" "),r("div",{staticClass:"flex items-center leading-15"},[r("Avatar",{staticClass:"mr-2 flex-shrink-0 -sm:hidden",attrs:{src:t.$auth.user.avatar}}),t._v(" "),r("a-tabs",{staticClass:"!p-0",attrs:{"default-active-key":1,tabBarGutter:5},model:{value:t.commentTab,callback:function(e){t.commentTab=e},expression:"commentTab"}},[r("a-tab-pane",{key:1,attrs:{tab:"Write"}}),t._v(" "),r("a-tab-pane",{key:2,attrs:{tab:"Preview"}})],1)],1),t._v(" "),1==t.commentTab?r("div",[r("div",{staticClass:"toolbar"},[r("div",{staticClass:"cursor-pointer select-none",on:{click:function(e){return t.$refs.commentImage.click()}}},[r("a-icon",{staticClass:"mr-2",attrs:{type:"picture"}}),t._v(" 이미지 추가\n      ")],1)]),t._v(" "),r("a-textarea",{ref:"ta",staticClass:"markdown-ta",attrs:{placeholder:"코멘트를 추가하기",spellcheck:"false",rows:10},on:{focus:function(e){t.areaActive=!0},blur:function(e){t.areaActive=!1}},model:{value:t.mdArea,callback:function(e){t.mdArea=e},expression:"mdArea"}})],1):r("div",[r("threadMdView",{attrs:{md:t.mdArea}})],1),t._v(" "),r("div",{staticClass:"py-3 w-full flex items-center gap-x-3 justify-end"},[t.thread.closed||t.toComment?t._e():r("a-button",{attrs:{type:"dashed"},on:{click:t.close}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"text-red-500 flex items-center mr-2"},[r("a-icon",{attrs:{type:"check-circle"}})],1),t._v("\n        Close\n      ")])]),t._v(" "),t.toComment?r("a-button",{attrs:{type:"primary",ghost:"",loading:t.writeLoading},on:{click:t.reply}},[r("div",{staticClass:"flex items-center"},[t._v("Reply")])]):r("a-button",{attrs:{type:"primary",ghost:"",loading:t.writeLoading},on:{click:t.write}},[r("div",{staticClass:"flex items-center"},[t._v("Comment")])])],1)])}),[],!1,null,"610c33e3",null);e.default=component.exports;installComponents(component,{Avatar:r(1302).default})}}]);