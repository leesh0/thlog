{"version":3,"file":"pages/settings/profile.js","sources":["webpack:///./pages/settings/profile.vue?ce32","webpack:///./pages/settings/profile.vue","webpack:///./pages/settings/profile.vue?7eb7","webpack:///./pages/settings/profile.vue?a8e9"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"max-w-screen-sm mx-auto px-3 mt-5\"},[_vm._ssrNode(\"<input type=\\\"file\\\" accept=\\\"image/*\\\" class=\\\"hidden\\\"> <h1 class=\\\"text-xl\\\">프로필 설정</h1> \"),_vm._ssrNode(\"<div class=\\\"flex\\\">\",\"</div>\",[_vm._ssrNode(\"<div>\",\"</div>\",[_vm._ssrNode(\"<div id=\\\"profile-image\\\" class=\\\"p-3 text-center\\\">\",\"</div>\",[_vm._ssrNode(\"<img\"+(_vm._ssrAttr(\"src\",_vm.avatar))+\" class=\\\"rounded-full w-20 h-20 mx-auto cursor-pointer\\\"> \"),_c('a-button',{staticClass:\"mt-3\",attrs:{\"type\":\"dashed\"},on:{\"click\":function($event){return _vm.$refs.avatar.click()}}},[_vm._v(\"\\n          프로필 변경\\n        \")])],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"flex-1\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"text-sm\\\">닉네임</div> \"),_c('a-input',{model:{value:(_vm.nickname),callback:function ($$v) {_vm.nickname=$$v},expression:\"nickname\"}}),_vm._ssrNode(\" <div class=\\\"text-sm mt-3\\\">한줄소개</div> \"),_c('a-textarea',{model:{value:(_vm.introduce),callback:function ($$v) {_vm.introduce=$$v},expression:\"introduce\"}})],2)],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"mt-10\\\">\",\"</div>\",[_vm._ssrNode(\"<h1 class=\\\"text-xl mb-3\\\">SNS연결</h1> \"),_vm._ssrNode(\"<div class=\\\"flex items-center py-1\\\">\",\"</div>\",[_c('a-icon',{staticClass:\"mr-2\",attrs:{\"type\":\"github\"}}),_vm._ssrNode(\"Github 유저명\\n    \")],2),_vm._ssrNode(\" \"),_c('a-input',{attrs:{\"addon-before\":\"https://github.com/\",\"default-value\":\"github\"},model:{value:(_vm.github),callback:function ($$v) {_vm.github=$$v},expression:\"github\"}}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"flex items-center py-1 mt-5\\\">\",\"</div>\",[_c('a-icon',{staticClass:\"mr-2\",attrs:{\"type\":\"link\"}}),_vm._ssrNode(\"웹사이트\\n    \")],2),_vm._ssrNode(\" \"),_c('a-input',{attrs:{\"default-value\":\"https://example.com\"},model:{value:(_vm.website),callback:function ($$v) {_vm.website=$$v},expression:\"website\"}})],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"flex justify-end mt-10\\\">\",\"</div>\",[_c('a-button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.save}},[_vm._v(\"저장하기\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  async asyncData({ $axios }) {\n    let { data } = await $axios.get('/auth/user')\n    return {\n      user: data,\n      nickname: data.nickname,\n      avatar: data.avatar,\n      introduce: data.introduce,\n      github: data.github,\n      website: data.website,\n    }\n  },\n  middleware: 'auth',\n  methods: {\n    save() {\n      this.$axios\n        .patch(`auth/user/`, {\n          nickname: this.nickname,\n          introduce: this.introduce,\n          github: this.github,\n          website: this.website,\n        })\n        .then((r) => {\n          this.$notification['success']({\n            message: '프로필을 갱신하였습니다.',\n            description: '정상적으로 프로필이 갱신되었습니다.',\n          })\n          this.$auth.setUser(r.data)\n        })\n        .catch((e) => {\n          this.$message.error(\n            '프로필 갱신에 실패하였습니다. 다시 시도해 주세요.'\n          )\n        })\n    },\n    changeAvatar() {\n      const avatarFrm = new FormData()\n      var avatarFile = this.$refs.avatar.files[0]\n      avatarFrm.append('avatar', avatarFile)\n      let loading = this.$message.loading('프로필 사진을 업로드중...', 0)\n      this.$axios\n        .patch('/auth/user/', avatarFrm)\n        .then((r) => {\n          this.avatar = r.data.avatar\n          this.$message.destroy()\n          this.$message.success('프로필 사진이 변경되었습니다.')\n          this.$auth.setUser(r.data)\n        })\n        .catch((e) => {\n          this.$message.destroy()\n          this.$message.error('프로필 사진 변경에 실패하였습니다.')\n        })\n    },\n  },\n}\n","import mod from \"-!../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!./profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./profile.vue?vue&type=template&id=52227f8b&\"\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"866e86ee\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAxCA;AAbA;;ACrDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}